{"version":3,"file":"injection.js","sources":["../../src/config.js","../../src/remover.js","../../src/injection.js"],"sourcesContent":["'use strict';\n\n// basic\nexport const APP_NAME = 'Youtube Shorts Remover';\n\n// message keys\nexport const MSG_KEY_REMOVE_EL = \"removeElements\";\nexport const MSG_KEY_CURRENT_URL = \"currentUrl\";\n\n// html elements to remove\nexport const HTML_ELEMENTS_TO_REMOVE = [\n    { \"escalate\": 1, \"query\": `a[title=\"Shorts\"]`},\n    { \"escalate\": 1, \"query\": `a[title=\"Explore\"]`},\n    { \"escalate\": 2, \"query\": `a[href*=\"/shorts/\"]`}\n];\n\n// delay between shorts check\nexport const SHORTS_CHECK_DELAY_MS = 3000;\n","'use strict';\n\n// import config\nimport { APP_NAME, HTML_ELEMENTS_TO_REMOVE, SHORTS_CHECK_DELAY_MS } from './config.js';\n\n\nfunction is_youtube(){\n\n    // get url\n    const url = window.location.href;\n\n    // validate\n    return url.includes('youtube');\n}\n\n\nfunction remove_html_elements(){\n\n    // check \n    if(!is_youtube()) return;\n\n    // go through removers\n    HTML_ELEMENTS_TO_REMOVE.forEach(HTML_ELEMENT_TO_REMOVE => {\n\n        // destructure\n        const { escalate, query } = HTML_ELEMENT_TO_REMOVE;\n\n        // log\n        console.log(`${APP_NAME} - Selecting ${query}`)\n\n        // get html elements\n        const elements = document.querySelectorAll(query);\n        \n        // validate\n        if(elements === undefined || elements === null) {\n            \n            // log\n            console.log(`${APP_NAME} - Failed to run ${query}`);\n            \n            return;\n        }\n\n        // escalate to parent\n        for (const element of elements) {\n            \n            // validate\n            if (element === undefined || element === null) continue;\n\n            // init parent\n            let patent_element = element;\n\n            // go through escalation levels\n            for(let i=0 ; i<escalate ; i++){\n                patent_element = patent_element.parentElement;\n            }\n\n            // remove\n            patent_element.remove();\n        }\n    });    \n}\n\n\nexport default function run(){\n\n    // remove\n    remove_html_elements();\n\n    // in loop\n    setTimeout(() => {\n        run();\n    }, SHORTS_CHECK_DELAY_MS);\n}\n","'use strict';\n\n// import config\nimport { APP_NAME, MSG_KEY_REMOVE_EL, MSG_KEY_CURRENT_URL } from './config.js';\n\n// import remover\nimport remover from './remover.js';\n\n\n// message interface\nchrome.runtime.onMessage.addListener(async function(message, sender, sendResponse) {\n        switch(message.type) {\n            case MSG_KEY_CURRENT_URL:\n                console.log(`${APP_NAME} - url requested`)\n                const url = window.location.href;\n                sendResponse(url);\n                break;\n\n            case MSG_KEY_REMOVE_EL:\n                console.log(`${APP_NAME} - removing html elements`)\n                remover();\n                break;\n\n            default:\n                if (message.type.trim() === MSG_KEY_REMOVE_EL) {\n                    console.log(`${APP_NAME} - fallback on remover`);\n                    remover();\n                } else {\n                    console.error(`${APP_NAME} - Unrecognised message: ${message.type}`);\n                }\n        }\n    }\n);\n"],"names":["remover"],"mappings":"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"}